<!DOCTYPE html>
<html>
	<head>
    <style>
      th,td {
        text-align: left;
      }
    </style>
	</head>	
	<body>
		<div id="canvas">
			<h1>Vidocq</h1>
			<table id="services"></table>
		</div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

    <script>
      function update() {
        $.getJSON('index.json', function(services) {
          content = '<tr><th>Name</th><th>Instances</th></tr>';

          services.map(function(service) {
            service.versions.map(function(version) {
              summary = '';

              version.instances.map(function(instance) {
                summary += instance.endpoint + '\n';
              });

              content += '<tr><td>' + 
                  service.name + ' ' + 
                  version.number + '</td><td>' + 
                  version.instances.length + '</td></tr>';
            })
          });

          $('#services').html(content);
        });
      }

      $(document).ready(function(){
        update();
      });
    </script>
	</body>
</html>
